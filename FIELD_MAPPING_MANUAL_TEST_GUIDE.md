# 字段映射功能手动测试指南

## 📋 测试环境

- **URL**: http://localhost:3001
- **服务器**: ✅ 运行中
- **功能状态**: ✅ 已完整实现

## 🧪 测试步骤

### 1. 打开流程设计器

1. 访问 http://localhost:3001
2. 点击左侧菜单的"流程设计器"
3. 等待页面加载完成

### 2. 显示配置面板

1. 在画布上点击**空白区域**（不要点击任何节点）
2. 右侧会显示"流程配置"面板
3. 向下滚动查看所有配置项

### 3. 绑定表单

1. 在"绑定表单"下拉菜单中选择一个表单
   - 推荐选择："订单申请表"
   - 推荐选择："请假申请表"
2. 观察表单绑定提示："已绑定: [表单名称]"
3. 查看"预览表单"按钮出现

### 4. 查看字段映射区域

1. 向下滚动配置面板
2. 找到"字段映射"区域（图标：🔗）
3. 应该看到：
   - 标题："字段映射"
   - 右侧："自动映射"按钮
   - 下方：字段列表

### 5. 测试字段映射显示

**检查字段列表**：
- ✅ 所有字段是否显示
- ✅ 必填字段是否有红色星号 (*)
- ✅ 每个字段是否有一个输入框

**检查状态标签**：
- ✅ 已映射字段显示绿色"已映射"标签
- ✅ 未映射必填字段显示红色"未映射"标签

### 6. 测试自动映射功能

1. 点击"自动映射"按钮
2. 应该看到：
   - 弹出提示："自动映射完成！已为同名字段创建映射"
   - 字段状态更新为"已映射"
   - 输入框自动填充变量名

### 7. 测试手动映射

1. 找到任意一个字段
2. 在输入框中输入变量名，例如：
   - 字段"订单金额" → 输入 "orderAmount"
   - 字段"客户姓名" → 输入 "customerName"
3. 观察：
   - ✅ 输入后状态立即更新
   - ✅ 显示"已映射"标签
   - ✅ 无需点击保存

### 8. 测试必填字段警告

1. 找到必填字段（带红色星号）
2. 删除其映射（清空输入框）
3. 观察：
   - ✅ 字段卡片背景变红
   - ✅ 显示红色边框
   - ✅ 显示"未映射"红色标签

### 9. 测试悬停效果

1. 将鼠标悬停在字段卡片上
2. 观察：
   - ✅ 边框变蓝色
   - ✅ 显示蓝色阴影
   - ✅ 卡片略微提升

### 10. 测试表单预览

1. 点击"预览表单"按钮
2. 应该看到：
   - 模态对话框打开
   - 显示表单的所有字段
   - 显示字段类型、必填状态等

## 📊 测试检查清单

### 功能检查
- [ ] 字段映射区域显示正常
- [ ] 所有表单字段都列出
- [ ] 自动映射功能正常
- [ ] 手动输入映射正常
- [ ] 状态更新实时生效
- [ ] 必填字段警告正确

### UI 检查
- [ ] 界面美观专业
- [ ] 颜色使用恰当（绿色=已映射，红色=未映射必填）
- [ ] 悬停效果正常
- [ ] 字体清晰易读

### 交互检查
- [ ] 输入框响应流畅
- [ ] 按钮点击有反馈
- [ ] 提示信息清晰
- [ ] 操作符合预期

## 🐛 常见问题排查

### 问题1: 看不到字段映射区域

**原因**: 没有绑定表单
**解决**: 先选择一个表单

### 问题2: 自动映射没有反应

**原因**: 所有字段已有映射
**解决**: 先清空某些字段的映射，再测试

### 问题3: 输入后没有保存

**原因**: 浏览器缓存问题
**解决**: 刷新页面重试

### 问题4: 样式显示异常

**原因**: 浏览器兼容性
**解决**: 使用 Chrome 或 Firefox 最新版

## 📸 预期截图

预期的界面应该包含：

1. **字段映射标题栏**
   - 左侧：🔗 字段映射
   - 右侧：自动映射按钮

2. **字段列表**
   - 每个字段一个卡片
   - 字段名 + 必填标记 + 状态标签
   - 输入框

3. **样式特点**
   - 卡片式布局
   - 悬停蓝色边框
   - 必填字段红色背景（未映射时）

## ✅ 验收标准

所有测试通过后，功能应该：

1. ✅ 完整显示所有表单字段
2. ✅ 自动映射同名字段
3. ✅ 手动配置映射
4. ✅ 清晰的状态显示
5. ✅ 友好的用户提示
6. ✅ 美观的界面设计

---

**测试完成后**: 在浏览器控制台中输入以下命令验证数据保存：

```javascript
// 查看当前配置
console.log(JSON.stringify(localStorage.getItem('workflow_designer_autosave'), null, 2))
```

应该能看到 `fieldMapping` 字段包含映射数据。
